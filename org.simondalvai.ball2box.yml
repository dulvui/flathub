app-id: org.simondalvai.ball2box
runtime: org.freedesktop.Platform
runtime-version: 21.08
sdk: org.freedesktop.Sdk
base: org.godotengine.godot.BaseApp
base-version: 3.5
command: godot-runner
finish-args:
  - --share=ipc
  - --socket=x11 # <-- Godot needs X11
  - --socket=pulseaudio
modules:
  - name: Ball2Box
    buildsystem: simple
    sources:
      # The game is pulled from GitHub
      - type: archive
        url: https://github.com/dulvui/ball2box/releases/download/v4.1.0/ball2box.tar.gz
        sha256: 7ed33c9ff981216d3d10c80b7326c58d4892d0efb1069da0ebdb1317b2e3cb3d
      - type: file
        path: org.simondalvai.ball2box.desktop
      - type: dir
        path: icons/
      - type: file
        path: org.simondalvai.ball2box.appdata.xml
    build-commands:
      # The game itself
      - install -D Ball2Box.pck /app/bin/godot-runner.pck
      # Metadata and a .desktop file
      - install -D org.simondalvai.ball2box.desktop /app/share/applications/org.simondalvai.ball2box.desktop
      - install -D org.simondalvai.ball2box.appdata.xml /app/share/metainfo/org.simondalvai.ball2box.appdata.xml
      # Icons
      - install -D icon-512.png /app/share/icons/hicolor/512x512/apps/org.simondalvai.ball2box.png
      - install -D icon-256.png /app/share/icons/hicolor/256x256/apps/org.simondalvai.ball2box.png
      - install -D icon-128.png /app/share/icons/hicolor/128x128/apps/org.simondalvai.ball2box.png
      - install -D icon-64.png /app/share/icons/hicolor/64x64/apps/org.simondalvai.ball2box.png
